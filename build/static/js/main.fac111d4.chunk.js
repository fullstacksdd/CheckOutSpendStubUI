(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1101:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(24),c=a.n(r),o=a(2),m=a(3),s=a(6),i=a(4),u=a(5),h=a(14),d=a(9),p=a(12),g=a.n(p),E="http://localhost:8080";function b(e){return g.a.post("".concat(E,"/api/products"),{cart:e}).then(function(e){return e.data})}function f(){return localStorage.getItem("x-access-token")&&localStorage.getItem("x-access-token-expiration")>Date.now()}var v=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(i.a)(t).call(this))).state={name:"",password:""},e.handleInputChange=e.handleInputChange.bind(Object(d.a)(Object(d.a)(e))),e.submitLogin=e.submitLogin.bind(Object(d.a)(Object(d.a)(e))),e}return Object(u.a)(t,e),Object(m.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"submitLogin",value:function(e){var t;e.preventDefault(),(t=this.state,g.a.post("".concat(E,"/api/auth"),{name:t.name,password:t.password}).then(function(e){return localStorage.setItem("x-access-token",e.data.token),localStorage.setItem("x-access-token-expiration",Date.now()+72e5),e.data}).catch(function(e){return Promise.reject("Authentication Failed!")})).then(function(e){return window.location="/"}).catch(function(e){return alert(e)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("hr",null),l.a.createElement("div",{className:"col-sm-8 col-sm-offset-2"},l.a.createElement("div",{className:"panel panel-primary"},l.a.createElement("div",{className:"panel-heading"},l.a.createElement("h3",null,"Log in ")),l.a.createElement("div",{className:"panel-body"},l.a.createElement("form",{onSubmit:this.submitLogin},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name:"),l.a.createElement("input",{type:"text",className:"form-control",name:"name",onChange:this.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password:"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:this.handleInputChange})),l.a.createElement("button",{type:"submit",className:"btn btn-default"},"Submit"))))))}}]),t}(l.a.Component),N=a(1103),y=a(48),C=a(1095),k=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a)));var n=y.fake("{{random.uuid}}"),l=y.fake("{{address.secondaryAddress}}"),r=C.random(999),c=y.fake("{{address.streetAddress}}"),m=y.fake("{{address.streetName}}"),u=y.fake("{{address.city}}"),h=y.fake("{{address.county}}"),p=y.fake("{{address.zipCode}}"),g=y.fake("{{internet.email}}"),E=y.fake("{{phone.phoneNumber}}"),b=y.fake("{{date.past}}"),f=C.random(9),v=y.fake("{{finance.account}}"),N=y.fake("{{finance.amount}}"),k=y.fake("{{name.firstName}}"),O=y.fake("{{name.lastName}}");return a.state={id:n,buildingName:"Exchange House",flatNumber:l,houseNumber:r,line2:c,line4:m,town:u,county:h,postCode:p,email:g,phone:E,dateOfBirth:b,dependents:f,employmentStatus:"EMPLOYED",accountNumber:v,sortCode:"20-20-15",grossAnnualIncome:N,firstName:k,lastName:O,maritalStatus:"MARRIED",middleName:"G",residentialStatus:"HOME_OWNER",title:"Mr"},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.localStorage.setItem("customer",JSON.stringify(this.state)),console.log(this.state)}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"addCustomer",value:function(e){e.preventDefault();var t,a=localStorage.getItem("customer");(t=a,g.a.post("".concat(E,"/api/customer"),{customer:t}).then(function(e){return e.data}).catch(function(e){return Promise.reject("Post Customer Data Failed!")})).then(function(e){return window.location="/"}).catch(function(e){return alert(e)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("hr",null),l.a.createElement("div",{className:"col-sm-8 col-sm-offset-2"},l.a.createElement("div",{className:"panel panel-primary"},l.a.createElement("div",{className:"panel-heading"},l.a.createElement("h3",null,"Customer")),l.a.createElement("div",{className:"panel-body"},l.a.createElement("form",{onSubmit:this.addCustomer},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Title:"),l.a.createElement("input",{type:"text",className:"form-control",name:"title",value:this.state.title,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"First Name:"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstName",value:this.state.firstName,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Last Name:"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastName",value:this.state.lastName,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Building Name:"),l.a.createElement("input",{type:"text",className:"form-control",name:"buildingName",value:this.state.buildingName,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Flat Number:"),l.a.createElement("input",{type:"text",className:"form-control",name:"flatNumber",value:this.state.flatNumber,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"House Number:"),l.a.createElement("input",{type:"text",className:"form-control",name:"houseNumber",value:this.state.houseNumber,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Address Line 2:"),l.a.createElement("input",{type:"text",className:"form-control",name:"line2",value:this.state.line2,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Address Line 4:"),l.a.createElement("input",{type:"text",className:"form-control",name:"line4",value:this.state.line4,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Town:"),l.a.createElement("input",{type:"text",className:"form-control",name:"town",value:this.state.town,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Post Code:"),l.a.createElement("input",{type:"text",className:"form-control",name:"postCode",value:this.state.postCode,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"County:"),l.a.createElement("input",{type:"text",className:"form-control",name:"County",value:this.state.county,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Email:"),l.a.createElement("input",{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Phone Number:"),l.a.createElement("input",{type:"text",className:"form-control",name:"phoneNumber",value:this.state.phone,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Date Of Birth:"),l.a.createElement("input",{type:"text",className:"form-control",name:"dateOfBirth",value:this.state.dateOfBirth,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Dependents:"),l.a.createElement("input",{type:"text",className:"form-control",name:"dependents",value:this.state.dependents,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Employment Status:"),l.a.createElement("input",{type:"text",className:"form-control",name:"employmentStatus",value:this.state.employmentStatus,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Sort Code:"),l.a.createElement("input",{type:"text",className:"form-control",name:"sortCode",value:this.state.sortCode,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Account Number:"),l.a.createElement("input",{type:"text",className:"form-control",name:"accountNumber",value:this.state.accountNumber,onChange:this.handleFormChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Gross Annual Income:"),l.a.createElement("input",{type:"text",className:"form-control",name:"grossAnnualIncome",value:this.state.grossAnnualIncome,onChange:this.handleFormChange})),l.a.createElement("button",{type:"submit",className:"btn btn-success float-right",onClick:this.addCustomer,style:{marginRight:"10px"}},"Save"),l.a.createElement(N.a,{to:"/"},l.a.createElement("button",{className:"btn btn-danger float-right",style:{marginRight:"10px"}},"Cancel")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))))))}}]),t}(l.a.Component),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleInputChange=function(e){return a.setState(Object(h.a)({},e.target.name,e.target.value))},a.addToCart=function(){var e=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):{},t=a.props.product.id.toString();e[t]=e[t]?e[t]:0;var n=e[t]+parseInt(a.state.quantity);a.props.product.available_quantity<n?e[t]=a.props.product.available_quantity:e[t]=n,localStorage.setItem("cart",JSON.stringify(e))},a.state={quantity:1},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.product;return l.a.createElement("div",{className:"card",style:{marginBottom:"10px"}},l.a.createElement("div",{className:"card-body"},l.a.createElement("h4",{className:"card-title"},e.name),l.a.createElement("p",{className:"card-text"},e.description),l.a.createElement("img",{className:"card-image",src:e.image_url,alt:"jpeg",width:"325px",height:"175px"}),l.a.createElement("p",null),l.a.createElement("h5",{className:"card-text"},l.a.createElement("small",null,"price: "),"\xa3",e.price),l.a.createElement("span",{className:"card-text"},l.a.createElement("small",null,"Available Quantity: "),e.available_quantity),e.available_quantity>0?l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-sm btn-warning float-right",onClick:this.addToCart},"Add to cart"),l.a.createElement("input",{type:"number",value:this.state.quantity,name:"quantity",onChange:this.handleInputChange,className:"float-right",style:{width:"60px",marginRight:"10px",borderRadius:"3px"}})):l.a.createElement("p",{className:"text-danger"}," product is out of stock ")))}}]),t}(l.a.Component),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).state={products:[]},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("".concat(E,"/api/products")).then(function(e){return e.data}).then(function(t){e.setState({products:t})})}},{key:"render",value:function(){var e=this.state.products;return l.a.createElement("div",{className:" container"},l.a.createElement("h3",{className:"card-title"},"List of Available Products"),l.a.createElement("hr",null),e.map(function(e,t){return l.a.createElement(O,{product:e,key:t})}),l.a.createElement("hr",null),l.a.createElement(N.a,{to:"/checkout"},l.a.createElement("button",{className:"btn btn-success float-right"},"Checkout")),l.a.createElement(N.a,{to:"/cart"},l.a.createElement("button",{className:"btn btn-primary float-right",style:{marginRight:"10px"}},"View Cart")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(l.a.Component),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).state={quantity:1},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product;return console.log(t),l.a.createElement("div",{className:"card",style:{marginBottom:"10px"}},l.a.createElement("div",{className:"card-body"},l.a.createElement("h4",{className:"card-title"},t.name),l.a.createElement("h5",{className:"card-text"},l.a.createElement("small",null,"price: "),"\xa3",t.price),l.a.createElement("span",{className:"card-text text-success"},l.a.createElement("small",null,"Quantity: "),t.qty),l.a.createElement("img",{className:"card-image",src:t.image_url,alt:"jpeg",width:"325px",height:"175px"}),l.a.createElement("button",{className:"btn btn-sm btn-warning float-right",onClick:function(){return e.props.remove(t)}},"Remove from cart")))}}]),t}(l.a.Component),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).removeFromCart=function(e){var t=a.state.products.filter(function(t){return t.id!==e.id}),n=JSON.parse(localStorage.getItem("cart"));delete n[e.id.toString()],localStorage.setItem("cart",JSON.stringify(n));var l=a.state.total-e.qty*e.price;a.setState({products:t,total:l})},a.clearCart=function(){localStorage.removeItem("cart"),a.setState({products:[]})},a.state={products:[],total:0},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("cart");t&&b(t).then(function(t){for(var a=0,n=0;n<t.length;n++)a+=t[n].price*t[n].qty;e.setState({products:t,total:a})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.products,n=t.total;return l.a.createElement("div",{className:" container"},l.a.createElement("h3",{className:"card-title"},"Cart"),l.a.createElement("hr",null),a.map(function(t,a){return l.a.createElement(j,{product:t,remove:e.removeFromCart,key:a})}),l.a.createElement("hr",null),a.length?l.a.createElement("div",null,l.a.createElement("h4",null,l.a.createElement("small",null,"Total Amount:"),l.a.createElement("span",{className:"float-right text-primary"},"\xa3",n)),l.a.createElement("hr",null)):"",a.length?"":l.a.createElement("h3",{className:"text-warning"},"No item on the cart"),l.a.createElement(N.a,{to:"/checkout"},l.a.createElement("button",{className:"btn btn-success float-right"},"Checkout")),l.a.createElement("button",{className:"btn btn-danger float-right",onClick:this.clearCart,style:{marginRight:"10px"}},"Clear Cart"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(l.a.Component),w=a(1106),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).state={products:[],total:0},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("cart");t&&b(t).then(function(t){for(var a=0,n=0;n<t.length;n++)a+=t[n].price*t[n].qty;e.setState({products:t,total:a})})}},{key:"updateCustomer",value:function(){alert("Hey!")}},{key:"render",value:function(){if(!f())return l.a.createElement(w.a,{to:"/login"});var e=this.state,t=e.products,a=e.total;return l.a.createElement("div",{className:" container"},l.a.createElement("h3",{className:"card-title"},"Checkout"),l.a.createElement("hr",null),t.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("p",null,e.name,l.a.createElement("small",null," (quantity: ",e.qty,")"),l.a.createElement("span",{className:"float-right text-primary"},"\xa3",e.qty*e.price)),l.a.createElement("br",null),l.a.createElement("hr",null))}),l.a.createElement("hr",null),t.length?l.a.createElement("div",null,l.a.createElement("h4",null,l.a.createElement("small",null,"Total Amount:"),l.a.createElement("span",{className:"float-right text-primary"},"\xa3",a)),l.a.createElement("hr",null)):"",t.length?"":l.a.createElement("h3",{className:"text-warning"},"No item on the cart"),l.a.createElement(N.a,{to:"/customer"},l.a.createElement("button",{className:"btn btn-success float-right",style:{marginRight:"10px"}},"Payment")),l.a.createElement(N.a,{to:"/"},l.a.createElement("button",{className:"btn btn-danger float-right",style:{marginRight:"10px"}},"Cancel")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}}]),t}(l.a.Component),F=a(1105),A=a(1104),q=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"logOut",value:function(){localStorage.removeItem("x-access-token")}},{key:"render",value:function(){var e=f();return l.a.createElement(F.a,null,l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},l.a.createElement("div",{className:"container"},l.a.createElement(N.a,{className:"navbar-brand",to:"/"},"AFS Spend"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},l.a.createElement("div",{className:"navbar-nav"},l.a.createElement(N.a,{className:"nav-item nav-link",to:"/"},"Products"),l.a.createElement(N.a,{className:"nav-item nav-link",to:"/cart"},"Cart"),e?l.a.createElement(N.a,{className:"nav-item nav-link",to:"/checkout"},"Checkout"):"",e?l.a.createElement("a",{className:"nav-item nav-link",href:"/",onClick:this.logOut},"Log out"):l.a.createElement(N.a,{className:"nav-item nav-link float-right",to:"/login"},"Log in"),l.a.createElement(N.a,{className:"nav-item nav-link float-right",to:"/customer"},"Customer"))))),l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement(A.a,{exact:!0,path:"/",component:x}),l.a.createElement(A.a,{exact:!0,path:"/cart",component:S}),l.a.createElement(A.a,{exact:!0,path:"/checkout",component:I}),e?"":l.a.createElement(A.a,{exact:!0,path:"/login",component:v}),e?l.a.createElement(A.a,{exact:!0,path:"/customer",component:k}):"")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t,a){e.exports=a(1101)}},[[25,2,1]]]);
//# sourceMappingURL=main.fac111d4.chunk.js.map